import{r as t,c as e,h as n,H as i,g as u}from"./p-f5c88521.js";import{i as s}from"./p-82a9722f.js";import{j as r}from"./p-b8b300bf.js";import{a,b as o,c as h,d,e as b}from"./p-a4f57ab0.js";const c=(t,e)=>{switch(t=t.replace(/\s+/g,"").replace(/[^0-9\.,]+/g,""),e){case"fi-FI":case"sv-SE":t=t.replace(",",".");break;case"en-US":case"en-GB":t=t.replace(/,/g,"");break;default:throw new TypeError("Unrecognised locale: "+e)}return parseFloat(t)},m=class{constructor(n){t(this,n),this.duetChange=e(this,"duetChange",3),this.duetInput=e(this,"duetInput",3),this.duetBlur=e(this,"duetBlur",7),this.duetFocus=e(this,"duetFocus",7),this.inputId=r("DuetInput"),this.accessibleLive="{current} euroa valittuna",this.accessibleLiveEnabled=!0,this.accessibleAdd="Lisää summaan",this.accessibleSubtract="Vähennä summasta",this.theme="",this.margin="auto",this.expand=!1,this.unit="€",this.min=0,this.label="label",this.labelHidden=!1,this.locale="fi-FI",this.max=1e6,this.error="",this.tooltip="",this.step=5e3,this.required=!1,this.value="0",this.handleFocus=()=>{this.focusedValue=this.value},this.handleKeyDown=t=>{a(t)||o(t)?this.add(t):h(t)||d(t)?this.subtract(t):b(t)&&this.setValue(this.min||0)},this.handleChange=t=>{const e=t.target;if(e&&e.value&&e&&e.value){let n=this.cleanValue(e.value);(isNaN(n)||null==n)&&(n=this.min||0),this.setValue(n),this.duetInput.emit({originalEvent:t,value:this.cleanValue(this.value).toString(),component:"duet-number-input",valueAsNumber:n})}},this.handleBlur=t=>{const e=t.target;if(e&&e.value){let u=(n=this.cleanValue(e.value),i=this.step,Math.round(n/i)*i);u=((t,e,n)=>Math.min(Math.max(t,this.min),n))(u,0,this.max),u===this.cleanValue(this.value)&&u===this.cleanValue(this.focusedValue)||(this.setValue(u),this.emitChange(t))}var n,i},this.emitChange=t=>{const e=this.cleanValue(this.value);this.duetChange.emit({originalEvent:t,value:e.toString(),valueAsNumber:e,component:"duet-number-input"})},this.cleanValue=t=>t?c(t,this.locale):null,this.localizeValue=t=>t.toLocaleString(this.locale),this.setValue=t=>{this.value=this.localizeValue(t),this.duetInputElement.value=`${this.value} ${this.unit}`},this.add=t=>{t&&t.preventDefault();const e=this.cleanValue(this.value);if(e===this.max)return;const n=null==e?this.min:Math.min(e+this.step,this.max);this.value=this.localizeValue(n),this.emitChange(t)},this.subtract=t=>{t&&t.preventDefault();const e=this.cleanValue(this.value);if(e===this.min)return;const n=Math.max(e-this.step,this.min);this.value=this.localizeValue(n),this.emitChange(t)}}componentWillLoad(){s(this),this.value&&(this.value=this.localizeValue(c(this.value,this.locale)))}async setFocus(){this.duetInputElement.setFocus()}formatAnnouncement(){const t=this.cleanValue(this.value);return null==t?"":this.accessibleLive.replace("{current}",t.toString(10))}render(){const t=this.identifier||this.inputId,e=`${this.localizeValue(this.max)} ${this.unit}`.length,u=this.cleanValue(this.value);return n(i,{class:{"duet-theme-turva":"turva"===this.theme,"duet-expand":this.expand,"duet-m-0":"none"===this.margin}},n("div",{class:"duet-number-container"},n("duet-input",{ref:t=>this.duetInputElement=t,onDuetChange:t=>this.handleChange(t),onDuetFocus:this.handleFocus,onDuetBlur:t=>this.handleBlur(t),onKeyDown:t=>this.handleKeyDown(t),label:this.label,value:this.value?`${this.value} ${this.unit}`:"",error:this.error,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":null!=u?u:"",maxlength:e,name:this.name,required:this.required,role:this.role,labelHidden:this.labelHidden,tooltip:this.tooltip,identifier:t,theme:this.theme,margin:"none",expand:!0,numericKeyboard:!0,autoComplete:"off",type:"text"},n("div",{class:{"duet-number-buttons":!0,"duet-no-label":this.labelHidden}},n("button",{"aria-controls":t,"aria-disabled":null==u||u===this.min?"true":"false",class:"duet-number-button duet-number-button-subtract",onClick:this.subtract,type:"button"},n("duet-visually-hidden",null,this.accessibleSubtract," ",this.step),n("duet-icon",{icon:'<svg role="img" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m.75 12.788c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h22.5c.414 0 .75.336.75.75s-.336.75-.75.75z"/></svg>',size:"small",margin:"none",color:"turva"===this.theme?"secondary-turva":"secondary"})),n("button",{"aria-controls":t,"aria-disabled":u===this.max?"true":"false",class:"duet-number-button duet-number-button-add",onClick:this.add,type:"button"},n("duet-visually-hidden",null,this.accessibleAdd," ",this.step),n("duet-icon",{icon:'<svg role="img" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 24c-.414 0-.75-.336-.75-.75v-10.5h-10.5c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h10.5v-10.5c0-.414.336-.75.75-.75s.75.336.75.75v10.5h10.5c.414 0 .75.336.75.75s-.336.75-.75.75h-10.5v10.5c0 .414-.336.75-.75.75z"/></svg>',size:"small",margin:"none",color:"turva"===this.theme?"secondary-turva":"secondary"})))),this.accessibleLiveEnabled&&n("duet-visually-hidden",{"aria-live":"polite","aria-atomic":"true","aria-relevant":"all"},this.formatAnnouncement())))}get element(){return u(this)}};m.style='*.sc-duet-number-input,*.sc-duet-number-input::after,*.sc-duet-number-input::before{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;background:transparent;border:0;padding:0;margin:0}.sc-duet-number-input-h{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;background:transparent;border:0;padding:0;margin:0;margin-right:16px !important;margin-bottom:12px !important;display:inline-flex;text-align:left;vertical-align:bottom;min-width:calc(33.333% - 8px);max-width:100%;width:100%;line-height:1.25}.sc-duet-number-input-h:last-child,.sc-duet-number-input-h:last-of-type{margin-right:0 !important}@media (min-width: 36em){.sc-duet-number-input-h{width:calc(50% - 16px - 3px)}}.duet-expand.sc-duet-number-input-h{width:100% !important}.duet-m-0.sc-duet-number-input-h{margin:0 !important}.duet-number-container.sc-duet-number-input{position:relative;width:100%}.duet-number-buttons.sc-duet-number-input{-webkit-user-select:none;user-select:none;position:absolute;height:calc(100% - 2px);width:96px;right:1px;top:1px;z-index:200}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input{-webkit-appearance:none;appearance:none;cursor:pointer;text-align:center;display:inline-flex;align-items:center;justify-content:center;position:relative;background:white;height:100%;width:50%}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input{pointer-events:none}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input duet-icon.sc-duet-number-input{opacity:0.4}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:active duet-icon.sc-duet-number-input{transform:translateY(1px)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{outline:0}.user-is-tabbing.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{outline:1px dotted #0077b3;outline:5px auto -webkit-focus-ring-color}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type{border-left:1px solid #cfd2d4}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{content:"";position:absolute;top:0;left:-6px;width:6px;height:100%;background:linear-gradient(to left, rgba(207, 210, 212, 0.2) 0%, rgba(207, 210, 212, 0.2) 1px, rgba(207, 210, 212, 0.1) 1px, rgba(207, 210, 212, 0) 100%)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type{border-top-right-radius:4px;border-bottom-right-radius:4px}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{content:"";position:absolute;top:20%;left:0;width:1px;height:60%;background:#e1e3e6}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{background:linear-gradient(to left, rgba(209, 209, 209, 0.2) 0%, rgba(209, 209, 209, 0.2) 1px, rgba(209, 209, 209, 0.1) 1px, rgba(209, 209, 209, 0) 100%)}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{background:#e6e6e6}';export{m as duet_number_input}